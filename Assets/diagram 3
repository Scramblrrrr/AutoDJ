graph TB
    subgraph "Professional Auto-DJ System Architecture"
        A[Track Upload] --> B[Demucs Stem Separation]
        B --> C[Professional Track Analysis]
        
        subgraph "Advanced Track Analysis"
            C --> D[BPM & Beat Grid Detection]
            C --> E[Musical Key Detection]
            C --> F[Structural Analysis]
            C --> G[Vocal Presence Analysis]
            C --> H[Energy Profile Analysis]
            C --> I[Phrase Boundary Detection]
        end
        
        subgraph "Analysis Results"
            D --> J[Beat Grid with Downbeats]
            E --> K[Camelot Wheel Key]
            F --> L[Intro/Verse/Chorus/Outro]
            G --> M[Vocal Sections Map]
            H --> N[Energy Curve]
            I --> O[Phrase Markers]
        end
        
        subgraph "Professional Cue Points"
            J --> P[Intro Cue]
            K --> Q[Vocal In/Out]
            L --> R[Chorus/Drop Points]
            M --> S[Breakdown Cues]
            N --> T[Energy-Based Cues]
            O --> U[Outro Cues]
        end
        
        subgraph "Transition Style Selection"
            V[Track Compatibility Analysis] --> W{BPM Difference?}
            W -->|<3 BPM| X[Rolling Transition]
            W -->|3-8 BPM| Y[Relaxed Transition]
            W -->|>15 BPM| Z[Quick Cut + Effect]
            
            AA[Key Compatibility] --> BB{Harmonic Match?}
            BB -->|Perfect| CC[High Energy Overlap]
            BB -->|Adjacent| DD[Double Drop]
            BB -->|Clash| EE[Vocal Over Mix]
        end
        
        subgraph "Professional Transitions"
            FF[Relaxed Transition<br/>Outro → Intro<br/>16s Duration]
            GG[High Energy Overlap<br/>Peak → Peak<br/>8s Duration]
            HH[Rolling Transition<br/>Continuous Flow<br/>24s Duration]
            II[Double Drop<br/>Synchronized Peaks<br/>12s Duration]
            JJ[Quick Cut + Effect<br/>Masked Transition<br/>4s Duration]
            KK[Vocal Over Mix<br/>Intelligent Layering<br/>20s Duration]
            LL[Loop Transition<br/>Extended Creative Mix<br/>32s Duration]
        end
        
        subgraph "Serato-Style Viewport"
            MM[Enhanced Waveforms] --> NN[Frequency-Colored Display]
            NN --> OO[Bass: Green Tones]
            NN --> PP[Mid: Orange/Yellow]
            NN --> QQ[Treble: Bright Colors]
            
            RR[Beat Grid Overlay] --> SS[Downbeat Lines]
            RR --> TT[Regular Beat Lines]
            RR --> UU[Phrase Boundaries]
            
            VV[Professional Cue Points] --> WW[Hot Cues]
            VV --> XX[Loop Regions]
            VV --> YY[Energy Markers]
        end
        
        subgraph "Smooth Slider Controls"
            ZZ[Stem Volume Sliders] --> AAA[Drag-Based Interaction]
            AAA --> BBB[Real-Time Response]
            BBB --> CCC[Professional Feel]
        end
    end

    style A fill:#4CAF50
    style C fill:#2196F3
    style V fill:#FF9800
    style MM fill:#9C27B0
    style ZZ fill:#F44336